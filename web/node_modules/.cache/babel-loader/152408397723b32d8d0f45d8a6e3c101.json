{"ast":null,"code":"import _objectSpread from\"C:/code3/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/code3/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/code3/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/code3/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:/code3/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useState}from\"react\";import{useForm}from\"react-hook-form\";import{Form,Button,Input,Container,Header,Message}from\"semantic-ui-react\";import{gql,useMutation}from\"@apollo/client\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CREATE_USER=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    mutation Register($username: String!, $password: String!) {\\n        register(options: { username: $username, password: $password }) {\\n            user {\\n                username\\n            }\\n            errors {\\n                field\\n            }\\n        }\\n    }\\n\"])));function Register(_ref){var history=_ref.history;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),err=_useState2[0],setErr=_useState2[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit;var _useMutation=useMutation(CREATE_USER,{onCompleted:function onCompleted(_ref2){var _ref2$register=_ref2.register,user=_ref2$register.user,errors=_ref2$register.errors;user?history.push(\"/\"):setErr(errors[0].field);}}),_useMutation2=_slicedToArray(_useMutation,1),createUser=_useMutation2[0];var onSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return createUser({variables:data});case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{text:true,children:[/*#__PURE__*/_jsx(Header,{as:\"h2\",children:\"Register\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(Form.Field,{error:!!err,children:/*#__PURE__*/_jsx(Input,_objectSpread({name:\"username\",type:\"username\",placeholder:\"Username\",fluid:true},register(\"username\")))}),/*#__PURE__*/_jsx(Form.Field,{children:/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({name:\"password\",type:\"password\",placeholder:\"Password\"},register(\"password\")),{},{fluid:true}))}),err?/*#__PURE__*/_jsx(Message,{error:true,header:\"Register Error\"}):null,/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Submit\"})]})]});}export default Register;","map":{"version":3,"sources":["C:/code3/web/src/routes/Register.js"],"names":["React","useState","useForm","Form","Button","Input","Container","Header","Message","gql","useMutation","CREATE_USER","Register","history","err","setErr","register","handleSubmit","onCompleted","user","errors","push","field","createUser","onSubmit","data","variables"],"mappings":"+qBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,OAAT,KAAwB,iBAAxB,CAEA,OACIC,IADJ,CAEIC,MAFJ,CAGIC,KAHJ,CAIIC,SAJJ,CAKIC,MALJ,CAMIC,OANJ,KAOO,mBAPP,CAQA,OAASC,GAAT,CAAcC,WAAd,KAAiC,gBAAjC,C,wFAEA,GAAMC,CAAAA,WAAW,CAAGF,GAAH,0VAAjB,CAaA,QAASG,CAAAA,QAAT,MAA+B,IAAXC,CAAAA,OAAW,MAAXA,OAAW,CAC3B,cAAsBZ,QAAQ,CAAC,EAAD,CAA9B,wCAAOa,GAAP,eAAYC,MAAZ,eACA,aAAmCb,OAAO,EAA1C,CAAQc,QAAR,UAAQA,QAAR,CAAkBC,YAAlB,UAAkBA,YAAlB,CACA,iBAAqBP,WAAW,CAACC,WAAD,CAAc,CAC1CO,WAD0C,4BACE,0BAA9BF,QAA8B,CAAlBG,IAAkB,gBAAlBA,IAAkB,CAAZC,MAAY,gBAAZA,MAAY,CACxCD,IAAI,CAAGN,OAAO,CAACQ,IAAR,CAAa,GAAb,CAAH,CAAuBN,MAAM,CAACK,MAAM,CAAC,CAAD,CAAN,CAAUE,KAAX,CAAjC,CACH,CAHyC,CAAd,CAAhC,8CAAOC,UAAP,kBAMA,GAAMC,CAAAA,QAAQ,2FAAG,iBAAOC,IAAP,wIAAsBF,CAAAA,UAAU,CAAC,CAAEG,SAAS,CAAED,IAAb,CAAD,CAAhC,6GAAH,kBAARD,CAAAA,QAAQ,6CAAd,CAEA,mBACI,MAAC,SAAD,EAAW,IAAI,KAAf,wBACI,KAAC,MAAD,EAAQ,EAAE,CAAC,IAAX,sBADJ,cAEI,MAAC,IAAD,EAAM,QAAQ,CAAEP,YAAY,CAACO,QAAD,CAA5B,wBACI,KAAC,IAAD,CAAM,KAAN,EAAY,KAAK,CAAE,CAAC,CAACV,GAArB,uBACI,KAAC,KAAD,gBACI,IAAI,CAAC,UADT,CAEI,IAAI,CAAC,UAFT,CAGI,WAAW,CAAC,UAHhB,CAII,KAAK,KAJT,EAKQE,QAAQ,CAAC,UAAD,CALhB,EADJ,EADJ,cAWI,KAAC,IAAD,CAAM,KAAN,wBACI,KAAC,KAAD,8BACI,IAAI,CAAC,UADT,CAEI,IAAI,CAAC,UAFT,CAGI,WAAW,CAAC,UAHhB,EAIQA,QAAQ,CAAC,UAAD,CAJhB,MAKI,KAAK,KALT,GADJ,EAXJ,CAoBKF,GAAG,cAAG,KAAC,OAAD,EAAS,KAAK,KAAd,CAAe,MAAM,CAAC,gBAAtB,EAAH,CAAuD,IApB/D,cAqBI,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,oBArBJ,GAFJ,GADJ,CA4BH,CAED,cAAeF,CAAAA,QAAf","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\n\r\nimport {\r\n    Form,\r\n    Button,\r\n    Input,\r\n    Container,\r\n    Header,\r\n    Message,\r\n} from \"semantic-ui-react\";\r\nimport { gql, useMutation } from \"@apollo/client\";\r\n\r\nconst CREATE_USER = gql`\r\n    mutation Register($username: String!, $password: String!) {\r\n        register(options: { username: $username, password: $password }) {\r\n            user {\r\n                username\r\n            }\r\n            errors {\r\n                field\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nfunction Register({ history }) {\r\n    const [err, setErr] = useState(\"\");\r\n    const { register, handleSubmit } = useForm();\r\n    const [createUser] = useMutation(CREATE_USER, {\r\n        onCompleted({ register: { user, errors } }) {\r\n            user ? history.push(\"/\") : setErr(errors[0].field);\r\n        },\r\n    });\r\n\r\n    const onSubmit = async (data) => await createUser({ variables: data });\r\n\r\n    return (\r\n        <Container text>\r\n            <Header as=\"h2\">Register</Header>\r\n            <Form onSubmit={handleSubmit(onSubmit)}>\r\n                <Form.Field error={!!err}>\r\n                    <Input\r\n                        name=\"username\"\r\n                        type=\"username\"\r\n                        placeholder=\"Username\"\r\n                        fluid\r\n                        {...register(\"username\")}\r\n                    />\r\n                </Form.Field>\r\n\r\n                <Form.Field>\r\n                    <Input\r\n                        name=\"password\"\r\n                        type=\"password\"\r\n                        placeholder=\"Password\"\r\n                        {...register(\"password\")}\r\n                        fluid\r\n                    />\r\n                </Form.Field>\r\n                {err ? <Message error header=\"Register Error\"></Message> : null}\r\n                <Button type=\"submit\">Submit</Button>\r\n            </Form>\r\n        </Container>\r\n    );\r\n}\r\n\r\nexport default Register;\r\n"]},"metadata":{},"sourceType":"module"}