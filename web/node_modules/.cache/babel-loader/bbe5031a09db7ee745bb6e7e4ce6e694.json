{"ast":null,"code":"import _objectSpread from\"C:/code3/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/code3/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/code3/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/code3/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:/code3/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useState}from\"react\";import{useForm}from\"react-hook-form\";import{Form,Button,Input,Container,Header,Message}from\"semantic-ui-react\";import{gql,useMutation}from\"@apollo/client\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CREATE_CHANNEL=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    mutation CREATE_CHANNEL($name: String!) {\\n        createChannel(input: $name) {\\n            channel {\\n                name\\n            }\\n            errors {\\n                field\\n            }\\n        }\\n    }\\n\"])));function CreateChannel(_ref){var history=_ref.history;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),err=_useState2[0],setErr=_useState2[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit;var _useMutation=useMutation(CREATE_CHANNEL,{onCompleted:function onCompleted(_ref2){var _ref2$createChannel=_ref2.createChannel,channel=_ref2$createChannel.channel,errors=_ref2$createChannel.errors;channel?history.push(\"/\"):setErr(errors[0].field);}}),_useMutation2=_slicedToArray(_useMutation,1),createChannel=_useMutation2[0];var onSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return createChannel({variables:data});case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{text:true,children:[/*#__PURE__*/_jsx(Header,{as:\"h2\",children:\"Create Channel\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(Form.Field,{error:!!err,children:/*#__PURE__*/_jsx(Input,_objectSpread({name:\"name\",type:\"name\",placeholder:\"channel name\",fluid:true},register(\"name\")))}),err?/*#__PURE__*/_jsx(Message,{error:true,header:\"Create Channel Error\"}):null,/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Submit\"})]})]});}export default CreateChannel;","map":{"version":3,"sources":["C:/code3/web/src/routes/CreateChannel.js"],"names":["React","useState","useForm","Form","Button","Input","Container","Header","Message","gql","useMutation","CREATE_CHANNEL","CreateChannel","history","err","setErr","register","handleSubmit","onCompleted","createChannel","channel","errors","push","field","onSubmit","data","variables"],"mappings":"+qBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,OAAT,KAAwB,iBAAxB,CAEA,OACIC,IADJ,CAEIC,MAFJ,CAGIC,KAHJ,CAIIC,SAJJ,CAKIC,MALJ,CAMIC,OANJ,KAOO,mBAPP,CAQA,OAASC,GAAT,CAAcC,WAAd,KAAiC,gBAAjC,C,wFAEA,GAAMC,CAAAA,cAAc,CAAGF,GAAH,mSAApB,CAaA,QAASG,CAAAA,aAAT,MAAoC,IAAXC,CAAAA,OAAW,MAAXA,OAAW,CAChC,cAAsBZ,QAAQ,CAAC,EAAD,CAA9B,wCAAOa,GAAP,eAAYC,MAAZ,eACA,aAAmCb,OAAO,EAA1C,CAAQc,QAAR,UAAQA,QAAR,CAAkBC,YAAlB,UAAkBA,YAAlB,CACA,iBAAwBP,WAAW,CAACC,cAAD,CAAiB,CAChDO,WADgD,4BACI,+BAAtCC,aAAsC,CAArBC,OAAqB,qBAArBA,OAAqB,CAAZC,MAAY,qBAAZA,MAAY,CAChDD,OAAO,CAAGP,OAAO,CAACS,IAAR,CAAa,GAAb,CAAH,CAAuBP,MAAM,CAACM,MAAM,CAAC,CAAD,CAAN,CAAUE,KAAX,CAApC,CACH,CAH+C,CAAjB,CAAnC,8CAAOJ,aAAP,kBAMA,GAAMK,CAAAA,QAAQ,2FAAG,iBAAOC,IAAP,wIAAsBN,CAAAA,aAAa,CAAC,CAAEO,SAAS,CAAED,IAAb,CAAD,CAAnC,6GAAH,kBAARD,CAAAA,QAAQ,6CAAd,CAEA,mBACI,MAAC,SAAD,EAAW,IAAI,KAAf,wBACI,KAAC,MAAD,EAAQ,EAAE,CAAC,IAAX,4BADJ,cAEI,MAAC,IAAD,EAAM,QAAQ,CAAEP,YAAY,CAACO,QAAD,CAA5B,wBACI,KAAC,IAAD,CAAM,KAAN,EAAY,KAAK,CAAE,CAAC,CAACV,GAArB,uBACI,KAAC,KAAD,gBACI,IAAI,CAAC,MADT,CAEI,IAAI,CAAC,MAFT,CAGI,WAAW,CAAC,cAHhB,CAII,KAAK,KAJT,EAKQE,QAAQ,CAAC,MAAD,CALhB,EADJ,EADJ,CAWKF,GAAG,cACA,KAAC,OAAD,EAAS,KAAK,KAAd,CAAe,MAAM,CAAC,sBAAtB,EADA,CAEA,IAbR,cAcI,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,oBAdJ,GAFJ,GADJ,CAqBH,CAED,cAAeF,CAAAA,aAAf","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\n\r\nimport {\r\n    Form,\r\n    Button,\r\n    Input,\r\n    Container,\r\n    Header,\r\n    Message,\r\n} from \"semantic-ui-react\";\r\nimport { gql, useMutation } from \"@apollo/client\";\r\n\r\nconst CREATE_CHANNEL = gql`\r\n    mutation CREATE_CHANNEL($name: String!) {\r\n        createChannel(input: $name) {\r\n            channel {\r\n                name\r\n            }\r\n            errors {\r\n                field\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nfunction CreateChannel({ history }) {\r\n    const [err, setErr] = useState(\"\");\r\n    const { register, handleSubmit } = useForm();\r\n    const [createChannel] = useMutation(CREATE_CHANNEL, {\r\n        onCompleted({ createChannel: { channel, errors } }) {\r\n            channel ? history.push(\"/\") : setErr(errors[0].field);\r\n        },\r\n    });\r\n\r\n    const onSubmit = async (data) => await createChannel({ variables: data });\r\n\r\n    return (\r\n        <Container text>\r\n            <Header as=\"h2\">Create Channel</Header>\r\n            <Form onSubmit={handleSubmit(onSubmit)}>\r\n                <Form.Field error={!!err}>\r\n                    <Input\r\n                        name=\"name\"\r\n                        type=\"name\"\r\n                        placeholder=\"channel name\"\r\n                        fluid\r\n                        {...register(\"name\")}\r\n                    />\r\n                </Form.Field>\r\n\r\n                {err ? (\r\n                    <Message error header=\"Create Channel Error\"></Message>\r\n                ) : null}\r\n                <Button type=\"submit\">Submit</Button>\r\n            </Form>\r\n        </Container>\r\n    );\r\n}\r\n\r\nexport default CreateChannel;\r\n"]},"metadata":{},"sourceType":"module"}